     warning: clauses with the same name and arity (number of arguments) should be grouped together, "defp generate_fold_cases/2" was previously defined (lib/ben_ben.ex:134)
     │
 171 │   defp generate_fold_cases({:__block__, _meta, cases}, state) do
     │        ~
     │
     └─ lib/ben_ben.ex:171:8

     warning: variable "other" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 374 │           other ->
     │           ~
     │
     └─ lib/ben_ben.ex:374:11: BenBen.process_constructed/2

     warning: function generate_pattern_match/1 is unused
     │
 225 │   defp generate_pattern_match({name, _, args}) when is_list(args) do
     │        ~
     │
     └─ lib/ben_ben.ex:225:8: BenBen (module)

     warning: function extract_bindings/1 is unused
     │
 250 │   defp extract_bindings(args) do
     │        ~
     │
     └─ lib/ben_ben.ex:250:8: BenBen (module)

    warning: variable "return" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 68 │   defp execute_match_where(pattern, condition, return, node_name, tx_id) do
    │                                                ~~~~~~
    │
    └─ lib/cypher_executer.ex:68:48: CypherExecutor.execute_match_where/5

    warning: variable "var" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 69 │     {:node, label, var} = parse_pattern(pattern)
    │                    ~~~
    │
    └─ lib/cypher_executer.ex:69:20: CypherExecutor.execute_match_where/5

    warning: variable "var" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 92 │       {:node, label, var} ->
    │                      ~
    │
    └─ lib/cypher_executer.ex:92:22: CypherExecutor.execute_match/4

    warning: variable "return" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 89 │   defp execute_match(pattern, return, node_name, tx_id) do
    │                               ~~~~~~
    │
    └─ lib/cypher_executer.ex:89:31: CypherExecutor.execute_match/4

     warning: variable "var" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 100 │       {:node, label, var, properties} ->
     │                      ~
     │
     └─ lib/cypher_executer.ex:100:22: CypherExecutor.execute_create/3

    warning: DistGraphDatabase.rollback_transaction/2 is undefined or private
    │
 17 │         DistGraphDatabase.rollback_transaction(node_name, tx_id)
    │                           ~
    │
    └─ lib/cypher_executer.ex:17:27: CypherExecutor.execute/2

     warning: variable "last_log_index" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 491 │   defp handle_vote_request(state, term, candidate_id, last_log_index, last_log_term) do
     │                                                       ~~~~~~~~~~~~~~
     │
     └─ lib/examples/dist_graph_database.ex:491:55: DistGraphDatabase.handle_vote_request/5

     warning: variable "last_log_term" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 491 │   defp handle_vote_request(state, term, candidate_id, last_log_index, last_log_term) do
     │                                                                       ~~~~~~~~~~~~~
     │
     └─ lib/examples/dist_graph_database.ex:491:71: DistGraphDatabase.handle_vote_request/5

     warning: variable "tx_id" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 597 │         {:begin_transaction, tx_id} ->
     │                              ~
     │
     └─ lib/examples/dist_graph_database.ex:597:30: DistGraphDatabase.apply_log_entries/2

     warning: variable "result" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 602 │           {result, new_graph_state} =
     │            ~
     │
     └─ lib/examples/dist_graph_database.ex:602:12: DistGraphDatabase.apply_log_entries/2

     warning: function safe_call/3 is unused
     │
 664 │   defp safe_call(node_name, message, state) do
     │        ~
     │
     └─ lib/examples/dist_graph_database.ex:664:8: DistGraphDatabase (module)

     warning: function add_cluster_monitors/2 is unused
     │
 634 │   defp add_cluster_monitors(cluster, state) do
     │        ~
     │
     └─ lib/examples/dist_graph_database.ex:634:8: DistGraphDatabase (module)

     warning: LibGraph.get_vertices/1 is undefined or private
     │
 623 │     |> LibGraph.get_vertices()
     │                 ~
     │
     └─ lib/examples/dist_graph_database.ex:623:17: DistGraphDatabase.query_vertices_with_label/2

    warning: variable "ts" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 48 │       %{variant: :pending, operations: ops, timestamp: ts} ->
    │                                                        ~
    │
    └─ lib/examples/graph_database.ex:48:56: GraphDatabase.commit_transaction/2

     warning: variable "metadata" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 111 │     fold state.graph do
     │     ~~~~~~~~~~~~~~~~~~~
     │
     └─ lib/examples/graph_database.ex:111: GraphDatabase.query/2

     warning: variable "state" is unused (there is a variable with the same name in the context, use the pin operator (^) to match on it or prefix this variable with underscore if it is not meant to be used)
     │
 111 │     fold state.graph do
     │     ~~~~~~~~~~~~~~~~~~~
     │
     └─ lib/examples/graph_database.ex:111: GraphDatabase.query/2

     warning: variable "edge_list" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 203 │   defp execute_query(pattern, vertex_map, edge_list) do
     │                                           ~~~~~~~~~
     │
     └─ lib/examples/graph_database.ex:203:43: GraphDatabase.execute_query/3

     warning: variable "pattern" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 203 │   defp execute_query(pattern, vertex_map, edge_list) do
     │                      ~~~~~~~
     │
     └─ lib/examples/graph_database.ex:203:22: GraphDatabase.execute_query/3

     warning: variable "vertex_map" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 203 │   defp execute_query(pattern, vertex_map, edge_list) do
     │                               ~~~~~~~~~~
     │
     └─ lib/examples/graph_database.ex:203:31: GraphDatabase.execute_query/3

     warning: variable "state" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 209 │   defp validate_edge(state, from_id, to_id, type) do
     │                      ~~~~~
     │
     └─ lib/examples/graph_database.ex:209:22: GraphDatabase.validate_edge/4

    warning: variable "state" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 25 │     fold graph do
    │     ~~~~~~~~~~~~~
    │
    └─ lib/examples/lib_graph.ex:25: LibGraph.add_vertex/3

    warning: variable "state" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 46 │     fold graph do
    │     ~~~~~~~~~~~~~
    │
    └─ lib/examples/lib_graph.ex:46: LibGraph.add_edge/5

    warning: variable "edge_list" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 72 │     fold graph do
    │     ~~~~~~~~~~~~~
    │
    └─ lib/examples/lib_graph.ex:72: LibGraph.vertex_count/1

    warning: variable "metadata" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 72 │     fold graph do
    │     ~~~~~~~~~~~~~
    │
    └─ lib/examples/lib_graph.ex:72: LibGraph.vertex_count/1

    warning: variable "state" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 72 │     fold graph do
    │     ~~~~~~~~~~~~~
    │
    └─ lib/examples/lib_graph.ex:72: LibGraph.vertex_count/1

    warning: variable "vertex_map" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 82 │     fold graph do
    │     ~~~~~~~~~~~~~
    │
    └─ lib/examples/lib_graph.ex:82: LibGraph.edge_count/1

    warning: variable "state" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 82 │     fold graph do
    │     ~~~~~~~~~~~~~
    │
    └─ lib/examples/lib_graph.ex:82: LibGraph.edge_count/1

     warning: variable "vertex" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 103 │           vertex -> extract_neighbors(edge_list, vertex_id)
     │           ~
     │
     └─ lib/examples/lib_graph.ex:103:11: LibGraph.get_neighbors/2

    warning: variable "metadata" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 99 │     fold graph do
    │     ~~~~~~~~~~~~~
    │
    └─ lib/examples/lib_graph.ex:99: LibGraph.get_neighbors/2

    warning: variable "state" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 99 │     fold graph do
    │     ~~~~~~~~~~~~~
    │
    └─ lib/examples/lib_graph.ex:99: LibGraph.get_neighbors/2

     warning: variable "metadata" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 148 │     fold graph do
     │     ~~~~~~~~~~~~~
     │
     └─ lib/examples/lib_graph.ex:148: LibGraph.shortest_path/3

     warning: variable "state" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 148 │     fold graph do
     │     ~~~~~~~~~~~~~
     │
     └─ lib/examples/lib_graph.ex:148: LibGraph.shortest_path/3

     warning: variable "metadata" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 160 │     fold graph do
     │     ~~~~~~~~~~~~~
     │
     └─ lib/examples/lib_graph.ex:160: LibGraph.is_connected?/1

     warning: variable "state" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 160 │     fold graph do
     │     ~~~~~~~~~~~~~
     │
     └─ lib/examples/lib_graph.ex:160: LibGraph.is_connected?/1

     warning: clauses with the same name and arity (number of arguments) should be grouped together, "defp extract_neighbors/2" was previously defined (lib/examples/lib_graph.ex:112)
     │
 285 │   defp extract_neighbors(edges, vertex_id) do
     │        ~
     │
     └─ lib/examples/lib_graph.ex:285:8

    warning: variable "id" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 13 │     fold graph do
    │     ~~~~~~~~~~~~~
    │
    └─ lib/examples/my_graph.ex:13: MyGraph.sum/1

    warning: variable "state" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 13 │     fold graph do
    │     ~~~~~~~~~~~~~
    │
    └─ lib/examples/my_graph.ex:13: MyGraph.sum/1

    warning: variable "state" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 10 │     fold tree do
    │     ~~~~~~~~~~~~
    │
    └─ lib/examples/my_tree.ex:10: MyTree.sum/1

    warning: variable "state" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 19 │     fold obj do
    │     ~~~~~~~~~~~
    │
    └─ lib/examples/prototypal.ex:19: Prototypal.get_property/2

    warning: variable "state" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 73 │     fold obj do
    │     ~~~~~~~~~~~
    │
    └─ lib/examples/prototypal.ex:73: Prototypal.inspect_object/2

    warning: variable "state" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 87 │     fold obj do
    │     ~~~~~~~~~~~
    │
    └─ lib/examples/prototypal.ex:87: Prototypal.debug_chain/2

    warning: variable "state" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 26 │     fold tree do
    │     ~~~~~~~~~~~~
    │
    └─ lib/examples/tree_operations.ex:26: TreeOperations.map_tree/2

    warning: variable "state" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 38 │     fold tree do
    │     ~~~~~~~~~~~~
    │
    └─ lib/examples/tree_operations.ex:38: TreeOperations.filter_tree/2

     warning: variable "state" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 128 │     fold tree do
     │     ~~~~~~~~~~~~
     │
     └─ lib/examples/tree_operations.ex:128: TreeOperations.collect_values/1

    warning: function merge_with_level_increment/2 is unused
    │
 80 │   defp merge_with_level_increment(left_counts, right_counts) do
    │        ~
    │
    └─ lib/examples/tree_operations.ex:80:8: TreeOperations (module)

    warning: function merge_counts/2 is unused
    │
 75 │   defp merge_counts(left_counts, right_counts) do
    │        ~
    │
    └─ lib/examples/tree_operations.ex:75:8: TreeOperations (module)

Running ExUnit with seed: 150544, max_cases: 48

     warning: variable "node3" is unused (if the variable is not meant to be used, prefix it with an underscore)
     │
 227 │   test "node recovery", %{nodes: [node1, node2, node3], registry: registry} do
     │                                                 ~~~~~
     │
     └─ test/dist_graph_database_test.exs:227:49: DistGraphDatabaseTest."test node recovery"/1

    warning: function verify_cluster_size/2 is unused
    │
 95 │   defp verify_cluster_size(node_name, registry) do
    │        ~
    │
    └─ test/dist_graph_database_test.exs:95:8: DistGraphDatabaseTest (module)

    warning: function join_and_verify/4 is unused
    │
 70 │   defp join_and_verify(joining_node, target_node, registry, retries \\ 5) do
    │        ~
    │
    └─ test/dist_graph_database_test.exs:70:8: DistGraphDatabaseTest (module)


15:46:51.226 [debug] Registry already running

15:46:51.228 [debug] Starting nodes: [:node1, :node2, :node3]

15:46:51.503 [debug] Beginning election:
- Node: :node1
- New term: 1
- Current cluster: []


15:46:51.534 [debug] Join cluster request:
Node: :node2
Target: :node1


15:46:51.534 [debug] Processing join cluster request:
- Self node: :node2
- Target node: :node1
- Current cluster: []


15:46:51.536 [debug] New cluster membership: [:node1, :node2]

15:46:51.536 [debug] Broadcasting cluster update:
- From: :node2
- Members: [:node1, :node2]


15:46:51.536 [debug] Received cluster update:
- Node: :node2
- Current members: [:node1, :node2]
- New members: [:node1, :node2]


15:46:51.536 [debug] Received cluster update:
- Node: :node1
- Current members: []
- New members: [:node1, :node2]


15:46:51.678 [debug] Beginning election:
- Node: :node3
- New term: 1
- Current cluster: []


15:46:51.755 [debug] Beginning election:
- Node: :node2
- New term: 1
- Current cluster: [:node1, :node2]


15:46:51.755 [debug] Requesting vote from :node1

15:46:51.755 [debug] Requesting vote from :node2

15:46:51.755 [debug] Received vote request:
- From: :node2
- Term: 1
- Current term: 1
- Current role: candidate
- Voted for: :node2


15:46:51.755 [debug] Processing vote request:
- From candidate: :node2
- Term: 1
- Current term: 1
- Current role: candidate
- Voted for: :node2


15:46:51.755 [debug] Received vote response:
- Self: :node2
- From: :node2
- Term: 1
- Granted: true
- Current role: candidate
- Current term: 1
- Current votes: 1


15:46:51.755 [debug] Vote count update:
- Total nodes: 3
- Votes needed: 2
- Current votes: 1
- Voters: [:node2]


15:46:51.755 [debug] Received vote request:
- From: :node2
- Term: 1
- Current term: 1
- Current role: candidate
- Voted for: :node1


15:46:51.755 [debug] Processing vote request:
- From candidate: :node2
- Term: 1
- Current term: 1
- Current role: candidate
- Voted for: :node1


15:46:51.755 [debug] Received vote response:
- Self: :node2
- From: :node1
- Term: 1
- Granted: false
- Current role: candidate
- Current term: 1
- Current votes: 1


15:46:53.038 [debug] Join cluster request:
Node: :node3
Target: :node1


15:46:53.038 [debug] Processing join cluster request:
- Self node: :node3
- Target node: :node1
- Current cluster: []


15:46:53.038 [debug] New cluster membership: [:node1, :node2, :node3]

15:46:53.038 [debug] Broadcasting cluster update:
- From: :node3
- Members: [:node1, :node2, :node3]


15:46:53.038 [debug] Received cluster update:
- Node: :node3
- Current members: [:node1, :node2, :node3]
- New members: [:node1, :node2, :node3]


15:46:53.038 [debug] Received cluster update:
- Node: :node2
- Current members: [:node1, :node2]
- New members: [:node1, :node2, :node3]


15:46:53.038 [debug] Received cluster update:
- Node: :node1
- Current members: [:node1, :node2]
- New members: [:node1, :node2, :node3]


15:47:04.552 [debug] Registry already running

15:47:04.552 [debug] Starting nodes: [:node1, :node2, :node3]


  1) test node recovery (DistGraphDatabaseTest)
     test/dist_graph_database_test.exs:227
     ** (RuntimeError) Failed to achieve expected cluster size
     stacktrace:
       test/dist_graph_database_test.exs:45: DistGraphDatabaseTest.wait_for_cluster_size/4
       test/dist_graph_database_test.exs:37: DistGraphDatabaseTest.__ex_unit_setup_0/1
       test/dist_graph_database_test.exs:1: DistGraphDatabaseTest.__ex_unit__/2

